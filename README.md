# üöó AEB Processing Pipeline

This tool provides an end-to-end **Automatic Emergency Braking (AEB) data processing pipeline**.  
It handles raw data extraction from MF4 files, event segmentation, KPI extraction, and visualization.  

---

## üìê Architecture Overview

The pipeline is modular and consists of the following main components:

1. **Config**
   - Reads configuration from JSON and Excel files.
   - Provides:
     - Signal mappings
     - Associated calibratables
     - Graph specifications
     - Line color settings
     - Marker shapes
     - KPI schema

2. **InputHandler**
   - Extracts mapped signals from MF4 files.
   - Converts and saves signals into `.mat` files (MATLAB format).
   - Handles unit conversions and signal database lookups.

3. **EventDetector**
   - Splits log data into **chunks** where each chunk corresponds to a single AEB event.
   - Operates on `.mat` files generated by `InputHandler`.

4. **KpiExtractor**
   - Extracts **KPIs** from each detected AEB event.
   - Exports the results into a consolidated `.csv` file.

5. **Visualizer**
   - Plots KPIs based on graph specifications from the config.
   - Overlays calibratables where applicable.
   - Saves visualization figures.

---

## üîÑ Processing Workflow

1. **Configuration**
   - Provide a JSON configuration file (and optional Excel signal database).
   - Defines signals, calibration limits, KPIs, and plotting rules.

2. **Signal Extraction**
   - Raw MF4 log data is parsed.
   - Configured signals are mapped, filtered, and converted.
   - Saved into `.mat` files for further processing.

3. **Event Detection**
   - `.mat` files are segmented into chunks, each representing one AEB event.

4. **KPI Extraction**
   - For each event chunk, KPIs are calculated.
   - All KPIs are exported into a single CSV file.

5. **Visualization**
   - KPIs and calibration data are plotted according to the graph specification.
   - Figures are exported for reporting.

---

## üõ†Ô∏è Usage

### Run the Pipeline (MATLAB)
```matlab
% Set up project environment and add paths
projectRoot = '/Path/To/Script/AEB_KPI_Project';
addpath(genpath(projectRoot));
           
configPath = fullfile(projectRoot, 'config', 'Config.json');
aeb = AebPipeline(configPath);

aeb.run();
